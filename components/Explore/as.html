{% extends 'master.html' %} {% load static %} {% block css %}
<style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    input[type='number'] {
        -moz-appearance: textfield;
    }
    .email h1 {
        float: left;
    }
    .verify-email-text :hover {
        cursor: pointer;
    }
    .blueColor {
        background-color: brown;
    }
    th {
        background-color: white;
        font-weight: bold;
        color: #0d4b94;
        font-size: 20px;
        padding-top: 20px;
        padding-bottom: 20px;
        padding-left: 5px;
        padding-right: 5px;
        margin-bottom: 18px;
    }
    td {
        font-size: 18px;
        font-weight: bold;
        color: #0da6bf;
    }
    tr {
        padding-top: 18px;
        border-radius: 7px;
        margin-bottom: 18px;
    }
    table {
        border: 2px solid #05c0fb;
        border-radius: 20px;
        padding: 16px;
        background-color: white;
    }
    .green {
        color: green;
    }
    .even {
        background-color: lightsteelblue;
    }
    .odd {
        background-color: lightskyblue;
    }

    .back {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        backface-visibility: hidden;
        z-index: 0;
        border-radius: 30px;
        transform: rotateY(180deg);
        background-color: deeppink;
        color: rgb(245, 209, 215);
    }

    .front {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        border-radius: 30px;
        background-color: pink;
        backface-visibility: hidden;
        transform: rotateY(0deg);
    }

    .main {
        transform-style: preserve-3d;
        width: 260px;
        position: relative;
        height: 240px;
        border-radius: 30px;
        transition: all 0.5s ease-in;
    }

    .main:hover {
        transform: rotateY(180deg);
        box-shadow: 3px 3px 5px 2px rgba(0, 0, 0, 0.25);
    }
</style>
{% endblock %} {% block content %}
<div class="content" style="background-color: transparent; margin-top: 100px">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-10">
                <!-- <div class="card" style="background-color: #c3fdff; border: 1px solid black; padding: 10px; text-align: center; font-size: 25px;"> -->
                <div
                    class="card"
                    style="
                        background-color: white;
                        padding: 10px;
                        text-align: center;
                        font-size: 25px;
                        border-radius: 20px;
                    "
                >
                    <div
                        class="card-header card-header-azure"
                        style="background-color: #38b6ff; border-radius: 15px"
                    >
                        <h4 class="card-title" style="font-size: 24px; font-weight: bold">
                            <b>Recents Reports</b>
                        </h4>
                        <!-- <p class="card-category">your recently added reports with status</p> -->
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div
                                class="col-md"
                                style="
                                    overflow-x: auto;
                                    padding: 10px;
                                    border-radius: 11px;
                                    margin-left: 30px;
                                "
                            >
                                {#
                                <table style="width: 100%; text-align: center" id="table">
                                    #} {#
                                    <thead>
                                        #} {#
                                        <tr>
                                            #} {#
                                            <th><b>Month of Report</b></th>
                                            #} {#
                                            <th><b>Date of Report</b></th>
                                            #} {#
                                            <th><b>Diagnostic Lab Name</b></th>
                                            #} {#
                                            <th><b>Report</b></th>
                                            #} {#
                                            <th><b>Status</b></th>
                                            #} {#
                                        </tr>
                                        #} {#
                                    </thead>
                                    #} {#
                                </table>
                                #} {#
                                <div uk-lightbox class="h-auto w-auto">
                                    #} {#
                                    <a href="https://picsum.photos/200" data-caption="hello"
                                        >#} {#
                                        <div class="main">
                                            #} {#
                                            <div class="front"></div>
                                            #} {#
                                            <div class="back"></div>
                                            #} {#
                                        </div>
                                        #} {# </a
                                    >#} {#
                                </div>
                                #} {# Carousel for calendar effect #}
                                <div
                                    class="uk-position-relative uk-visible-toggle uk-light bg-info"
                                    style="transform: rotateZ(90deg); height: 200px; width: 200px"
                                    tabindex="-1"
                                    uk-slideshow="animation:pull"
                                >
                                    <ul
                                        class="uk-slideshow-items"
                                        style="
                                            position: absolute;
                                            left: 0;
                                            top: 0;
                                            height: 100%;
                                            width: 100%;
                                        "
                                    >
                                        <li
                                            style="
                                                width: 100%;
                                                height: 100%;
                                                position: absolute;
                                                left: 0;
                                                top: 0;
                                            "
                                        >
                                            <img
                                                src="https://picsum.photos/200"
                                                alt=""
                                                class="w-100 h-100"
                                                style="transform: rotateZ(-90deg)"
                                            />
                                        </li>
                                        <li style="width: 100%; height: 100%">
                                            <img
                                                src="https://picsum.photos/200"
                                                alt=""
                                                style="transform: rotateZ(-90deg)"
                                            />
                                        </li>
                                        <li style="width: 100%; height: 100%">
                                            <img
                                                src="https://picsum.photos/200"
                                                alt=""
                                                style="transform: rotateZ(-90deg)"
                                            />
                                        </li>
                                    </ul>

                                    <a
                                        class="
                                            uk-position-center-left
                                            uk-position-small
                                            uk-hidden-hover
                                        "
                                        href="#"
                                        uk-slidenav-previous
                                        uk-slideshow-item="previous"
                                        style="background-color: deeppink"
                                    ></a>
                                    <a
                                        class="
                                            uk-position-center-right
                                            uk-position-small
                                            uk-hidden-hover
                                        "
                                        href="#"
                                        uk-slidenav-next
                                        uk-slideshow-item="next"
                                        style="background-color: deeppink"
                                    ></a>
                                </div>
                                <!-- bootstrap carousel lhere -->
                                <div
                                    class="uk-position-relative uk-visible-toggle uk-light"
                                    tabindex="-1"
                                    uk-slider
                                >
                                    <ul
                                        class="
                                            uk-slider-items
                                            uk-child-width-1-1
                                            uk-child-width-1-2@s
                                            uk-child-width-1-3@m
                                        "
                                        id="reportsSlide"
                                    >
                                        <li>
                                            <div uk-lightbox class="h-auto w-auto mx-3">
                                                <a
                                                    href="https://picsum.photos/200"
                                                    data-caption="hello"
                                                >
                                                    <div class="main">
                                                        <img
                                                            class="front"
                                                            src="https://picsum.photos/200"
                                                        />
                                                        <div class="back"></div>
                                                    </div>
                                                </a>
                                            </div>
                                        </li>
                                        <li>
                                            <div uk-lightbox class="h-auto w-auto mx-3">
                                                <a
                                                    href="https://picsum.photos/200"
                                                    data-caption="hello"
                                                >
                                                    <div class="main">
                                                        <div class="front">
                                                            <img
                                                                class="w-100 img-fluid"
                                                                src="https://picsum.photos/200"
                                                            />
                                                        </div>
                                                        <div class="back"></div></div
                                                ></a>
                                            </div>
                                        </li>
                                        <li>
                                            <div uk-lightbox class="h-auto w-auto mx-3">
                                                <a
                                                    href="https://picsum.photos/200"
                                                    data-caption="hello"
                                                >
                                                    <div class="main">
                                                        <img
                                                            class="front"
                                                            src="https://picsum.photos/200"
                                                        />
                                                        <div class="back"></div></div
                                                ></a>
                                            </div>
                                        </li>
                                        <li>
                                            <div uk-lightbox class="h-auto w-auto mx-3">
                                                <a
                                                    href="https://picsum.photos/200"
                                                    data-caption="hello"
                                                >
                                                    <div class="main">
                                                        <img
                                                            class="front"
                                                            src="https://picsum.photos/200"
                                                        />
                                                        <div class="back"></div>
                                                    </div>
                                                </a>
                                            </div>
                                        </li>
                                        <li>
                                            <div uk-lightbox class="h-auto w-auto mx-3">
                                                <a
                                                    href="https://picsum.photos/200"
                                                    data-caption="hello"
                                                >
                                                    <div class="main">
                                                        <img
                                                            class="front"
                                                            src="https://picsum.photos/200"
                                                        />
                                                        <div class="back"></div></div
                                                ></a>
                                            </div>
                                        </li>
                                        <li>
                                            <div uk-lightbox class="h-auto w-auto mx-3">
                                                <a
                                                    href="https://picsum.photos/200"
                                                    data-caption="hello"
                                                >
                                                    <div class="main">
                                                        <img
                                                            class="front"
                                                            src="https://picsum.photos/200"
                                                        />
                                                        <div class="back"></div></div
                                                ></a>
                                            </div>
                                        </li>
                                    </ul>

                                    <a
                                        class="
                                            uk-position-center-left
                                            uk-position-small
                                            uk-hidden-hover
                                        "
                                        href="#"
                                        uk-slidenav-previous
                                        uk-slider-item="previous"
                                    ></a>
                                    <a
                                        class="
                                            uk-position-center-right
                                            uk-position-small
                                            uk-hidden-hover
                                        "
                                        href="#"
                                        uk-slidenav-next
                                        uk-slider-item="next"
                                    ></a>
                                </div>
                                <!-- bootstrap carousel ends here -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Trends card complete here -->
                <div
                    class="card"
                    style="
                        background-color: white;
                        padding: 10px;
                        text-align: center;
                        font-size: 25px;
                        border-radius: 20px;
                    "
                >
                    <div
                        class="card-header card-header-azure"
                        style="background-color: #38b6ff; border-radius: 15px"
                    >
                        <h4 class="card-title" style="font-size: 24px; font-weight: bold">
                            <b>Trends</b>
                        </h4>
                        <!-- <p class="card-category">your recently diagnoised test trends</p> -->
                    </div>
                    <div class="card-body">
                        <div
                            class="uk-position-relative uk-visible-toggle uk-light"
                            tabindex="-1"
                            uk-slideshow
                        >
                            <ul class="uk-slideshow-items">
                                <li>
                                    <div id="toptrend1" class="w-100 h-100"></div>
                                </li>
                                <li>
                                    <div id="toptrend2" class="w-100 h-100"></div>
                                </li>
                                <li>
                                    <div id="toptrend3" class="w-100 h-100"></div>
                                </li>
                            </ul>
                            <a
                                class="
                                    uk-position-center-left
                                    uk-slidenav-large
                                    uk-position-small
                                    uk-hidden-hover
                                "
                                href="#"
                                style="
                                    background-color: rgba(32, 191, 170, 0.81);
                                    border-radius: 10%;
                                "
                                uk-slidenav-previous
                                uk-slideshow-item="previous"
                            ></a>
                            <a
                                class="
                                    uk-position-center-right
                                    uk-slidenav-large
                                    uk-position-small
                                    uk-hidden-hover
                                "
                                href="#"
                                style="
                                    background-color: rgba(32, 191, 170, 0.81);
                                    border-radius: 10%;
                                "
                                uk-slidenav-next
                                uk-slideshow-item="next"
                            ></a>
                        </div>
                    </div>

                    <!-- </div> -->
                </div>
                {# Carousel for videos here #}
                <div
                    class="uk-position-relative uk-visible-toggle uk-light"
                    tabindex="-1"
                    uk-slideshow
                >
                    <ul class="uk-slideshow-items">
                        <li>
                            <div class="h-100 w-100">
                                <iframe
                                    width="100%"
                                    height="100%"
                                    src="https://www.youtube.com/embed/videoseries?list=UUrsiIIdNydwpiirjcs0tNBg&autoplay=1&loop=1&mute=1"
                                    allowfullscreen
                                ></iframe>
                            </div>
                        </li>
                        <li>
                            <div class="h-100 w-100">
                                <iframe
                                    width="100%"
                                    height="100%"
                                    src="https://www.youtube.com/embed/videoseries?list=UUrsiIIdNydwpiirjcs0tNBg&autoplay=1&loop=1&mute=1"
                                    allowfullscreen
                                ></iframe>
                            </div>
                        </li>
                        <li>
                            <div class="h-100 w-100">
                                <iframe
                                    width="100%"
                                    height="100%"
                                    src="https://www.youtube.com/embed/videoseries?list=UUrsiIIdNydwpiirjcs0tNBg&autoplay=1&loop=1&mute=1"
                                    allowfullscreen
                                ></iframe>
                            </div>
                        </li>
                    </ul>

                    <a
                        class="uk-position-center-left uk-position-small uk-hidden-hover"
                        href="#"
                        uk-slidenav-previous
                        uk-slideshow-item="previous"
                    ></a>
                    <a
                        class="uk-position-center-right uk-position-small uk-hidden-hover"
                        href="#"
                        uk-slidenav-next
                        uk-slideshow-item="next"
                    ></a>
                </div>
            </div>
            <ul
                class="uk-slideshow-nav uk-dotnav uk-flex-center uk-margin bg-danger"
                style="z-index: 3"
            ></ul>
            {# carousel for video ends here #}
            <!-- Trends card ends here -->
            <!-- <div id="txt" class="card" style=" padding: 10px; color: #000; background-color:#c3fdff; text-align: center; ">
                        <div class="row">
                            <div class="col-sm" ><img src="/media/img/TransparentLogo.png" height="100px" width="200px"></div>
                        </div>
                        <div class="row">
                            <div class="col-sm" ><img src="/media/gplay.png" class="img img-fluid" style="width:200px; height: 70px; margin-top: 20px;"></div>
                        </div>
                    </div> -->
            {# youtube card for righ side #} {#
            <div
                id="text-specific"
                style="
                    padding-top: 10px;
                    padding-bottom: 40px;
                    padding-left: 20px;
                    padding-right: 20px;
                    background-color: #fb4942;
                    text-align: center;
                    font-size: 25px;
                    border-radius: 20px;
                "
                class="card"
            >
                #} {#
                <div class="row">
                    #} {#
                    <div class="col-md">
                        #} {#
                        <img
                            src="/static/assets/img/yt_red.svg"
                            class="img img-fluid"
                            style="width: 200px; height: 100px; object-fit: contain"
                        />#} {#
                    </div>
                    #} {#
                </div>
                #} {##} {#
            </div>
            #} {# youtube card for righ side #}
        </div>
    </div>
    <!-- google play logo -->
    {#
    <div class="row">
        #} {#
        <div class="col-sm">
            <img
                src="/static/assets/img/gplay.png"
                class="img img-fluid"
                style="width: 200px; height: 70px; margin-top: 20px"
            />
        </div>
        #} {#
    </div>
    #}
    <!-- google play logo -->
    <!-- youtube iframe here -->
    {#
    <div class="row">
        #} {#
        <div class="col-md">
            #} {#
            <iframe
                width="100%"
                height="345"
                src="https://www.youtube.com/embed/videoseries?list=UUrsiIIdNydwpiirjcs0tNBg&autoplay=1&loop=1&mute=1"
            ></iframe
            >#} {#
        </div>
        #} {#
    </div>
    #}
    <!-- youtube iframe here -->
</div>
{% endblock %} {% block js %}
<script>
    var token = localStorage['token'];

    $(document).ready(function () {
        showPleaseWait();
        loadDocumentData(true);
        showPleaseWait();
        getTopCurrentTrends();
    });

    function getCookie(c_name) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + '=');
            if (c_start != -1) {
                c_start = c_start + c_name.length + 1;
                c_end = document.cookie.indexOf(';', c_start);
                if (c_end == -1) c_end = document.cookie.length;
                return unescape(document.cookie.substring(c_start, c_end));
            }
        }
        return '';
    }

    $('.dropdown-menu').click(function () {
        if (token != token_selected) {
            token = token_selected;
            if (token == null) token = localStorage['token'];
            var list = document.getElementById('table');

            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild);
            }
            if ($.fn.dataTable.isDataTable('#table')) {
                //console.log("init");
                // $('#table').dataTable().fnClearTable();
                //$('#table').DataTable().draw();
                $('#table').DataTable().clear();
                $('#table').DataTable().destroy();
            }
            //console.log(token);
            showPleaseWait();
            loadDocumentData(false);
            showPleaseWait();
            getTopCurrentTrends();
        }
    });

    function convertDate(inputFormat) {
        function pad(s) {
            return s < 10 ? '0' + s : s;
        }
        var d = new Date(inputFormat);
        return [pad(d.getDate()), pad(d.getMonth() + 1), d.getFullYear()].join('/');
    }

    function loadDocumentData(val) {
        //console.log(localStorage['token']);

        $.ajax({
            type: 'GET',
            url: '/api/get_recent_reports/',
            beforeSend: function (xhr) {
                xhr.setRequestHeader('Authorization', 'Token ' + token);
                xhr.setRequestHeader('X-CSRFToken', getCookie('csrftoken'));
            },
            success: function (result) {
                var data = result;
                console.log('got result fo reports', result);
                var table = document.getElementById('table');
                var tbody = document.createElement('tbody');
                table.appendChild(tbody);
                var ind = 0;
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        var data_month = data[key];
                        var i = 0;
                        for (var date in data_month) {
                            var date_data = data_month[date];

                            var tr = document.createElement('tr');
                            var imageFront = document.createElement('img');
                            image;
                            var td1 = document.createElement('td');
                            var td2 = document.createElement('td');
                            var td3 = document.createElement('td');
                            var td4 = document.createElement('td');
                            var td5 = document.createElement('td');

                            var txt1 = document.createTextNode(key);

                            // if(i==0){
                            //   td1.appendChild(txt1);
                            // }
                            // else{
                            //   td1.appendChild(document.createTextNode(""));
                            // }

                            var txt2 = document.createTextNode(date.split('-').reverse().join('/'));
                            var txt3 = document.createTextNode(date_data['diagnostic_lab_name']);
                            var txt6 = document.createElement('a');
                            // txt6.src="/static/assets/img/Download.svg";
                            txt6.href = date_data['file_path'];
                            txt6.style.cursor = 'pointer';
                            txt6.setAttribute('download', date_data['file_name']);
                            var txt61 = document.createElement('img');
                            txt61.src = '/static/assets/img/Download.svg';
                            txt6.appendChild(txt61);

                            var el_span = document.createElement('span');
                            var el_spanClass = el_span.setAttribute('class', 'green');
                            var txt5 = document.createTextNode(date_data['status']);
                            el_span.appendChild(txt5);

                            td1.appendChild(txt1);
                            td2.appendChild(txt2);
                            td3.appendChild(txt3);
                            td4.appendChild(txt6);
                            td5.appendChild(el_span);

                            // console.log(val);
                            if (ind % 2 == 0) {
                                tr.style.backgroundColor = '#E6F5F9';
                            } else tr.style.backgroundColor = 'white';

                            tr.appendChild(td1);
                            tr.appendChild(td2);
                            tr.appendChild(td3);
                            tr.appendChild(td4);
                            tr.appendChild(td5);

                            tbody.appendChild(tr);

                            i++;
                            ind++;
                        }
                    }
                }

                initTable();

                hidePleaseWait();
            },
            error: function (result) {
                hidePleaseWait();
                alert(result);
            }
        });
    }

    function initTable() {
        $('#table').DataTable({
            lengthMenu: [
                [5, 10, 20, -1],
                [5, 10, 20, ' All ']
            ],
            ordering: false,
            bLengthChange: false
        });
        $('.dataTables_length').addClass('bs-select');
    }

    function showPleaseWait() {
        if (document.querySelector('#pleaseWaitDialog') == null) {
            var modalLoading =
                '<div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false" role="dialog">\
                <div class="modal-dialog">\
                    <div class="modal-content">\
                        <div class="modal-header">\
                            <h4 class="modal-title">Loading...</h4>\
                        </div>\
                        <div class="modal-body">\
                            <div class="progress">\
                            <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar"\
                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%; height: 40px ;">\
                            </div>\
                            </div>\
                        </div>\
                    </div>\
                </div>\
            </div>';
            $(document.body).append(modalLoading);
        }

        $('#pleaseWaitDialog').modal('show');
    }

    function hidePleaseWait() {
        $('#pleaseWaitDialog').modal('hide');
    }

    function show() {
        location.reload();
    }
</script>
<script>
    // Top Trends
    var options1 = {
        series: [
            {
                name: 'FBPS',
                data: [10, 41, 35, 51, 49, 62, 69, 91, 148]
            }
        ],
        chart: {
            type: 'area',
            stacked: false,
            height: 350,
            zoom: {
                type: 'x',
                enabled: true,
                autoScaleYaxis: true
            },
            toolbar: {
                autoSelected: 'zoom'
            }
        },
        dataLabels: {
            enabled: false
        },
        markers: {
            size: 4,
            strokeColors: '#fff',
            strokeWidth: 2,
            strokeOpacity: 0.9,
            strokeDashArray: 0,
            fillOpacity: 1,
            shape: 'square',
            radius: 4,
            hover: {
                size: 6,
                sizeOffset: 3
            }
        },
        title: {
            text: 'Trends 1',
            align: 'center'
        },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.5,
                opacityTo: 0,
                stops: [0, 90, 100]
            }
        },
        yaxis: {
            title: {
                text: 'Units'
            }
        },
        xaxis: {
            type: 'datetime',
            labels: {
                datetimeFormatter: {
                    year: 'yyyy',
                    month: "MMM 'yy",
                    day: 'dd MMM yyyy',
                    hour: 'HH:mm'
                }
            },
            title: {
                text: 'Test Date'
            },
            categories: [
                '18/01/2020',
                '14/02/2020',
                '16/08/2020',
                '18/01/2021',
                '24/02/2021',
                '26/02/2021',
                '28/02/2021',
                '24/03/2021',
                '20/04/2021'
            ]
        }
    };

    // var chart1 = new ApexCharts(document.querySelector("#toptrend1"), options1);
    // chart1.render();

    // Top Trends 2

    var options2 = {
        series: [
            {
                name: 'FBPS',
                data: [10, 41, 35, 51, 49, 62, 69, 91, 148]
            }
        ],
        chart: {
            type: 'area',
            stacked: false,
            height: 350,
            zoom: {
                type: 'x',
                enabled: true,
                autoScaleYaxis: true
            },
            toolbar: {
                autoSelected: 'zoom'
            }
        },
        dataLabels: {
            enabled: false
        },
        markers: {
            size: 4,
            strokeColors: '#fff',
            strokeWidth: 2,
            strokeOpacity: 0.9,
            strokeDashArray: 0,
            fillOpacity: 1,
            shape: 'square',
            radius: 4,
            hover: {
                size: 6,
                sizeOffset: 3
            }
        },
        title: {
            text: 'Trends 2',
            align: 'center'
        },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.5,
                opacityTo: 0,
                stops: [0, 90, 100]
            }
        },
        yaxis: {
            title: {
                text: 'Units'
            }
        },
        xaxis: {
            type: 'datetime',
            labels: {
                datetimeFormatter: {
                    year: 'yyyy',
                    month: "MMM 'yy",
                    day: 'dd MMM yyyy',
                    hour: 'HH:mm'
                }
            },
            title: {
                text: 'Test Date'
            },
            categories: [
                '18/01/2020',
                '14/02/2020',
                '16/08/2020',
                '18/01/2021',
                '24/02/2021',
                '26/02/2021',
                '28/02/2021',
                '24/03/2021',
                '20/04/2021'
            ]
        }
    };

    // var chart2 = new ApexCharts(document.querySelector("#toptrend2"), options2);
    // chart2.render();

    // Top Trends 3

    var options3 = {
        series: [
            {
                name: 'FBPS',
                data: [10, 41, 35, 51, 49, 62, 69, 91, 148]
            }
        ],
        chart: {
            type: 'area',
            stacked: false,
            height: 350,
            zoom: {
                type: 'x',
                enabled: true,
                autoScaleYaxis: true
            },
            toolbar: {
                autoSelected: 'zoom'
            }
        },
        dataLabels: {
            enabled: false
        },
        markers: {
            size: 4,
            strokeColors: '#fff',
            strokeWidth: 2,
            strokeOpacity: 0.9,
            strokeDashArray: 0,
            fillOpacity: 1,
            shape: 'square',
            radius: 4,
            hover: {
                size: 6,
                sizeOffset: 3
            }
        },
        title: {
            text: 'Trends 3',
            align: 'center'
        },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.5,
                opacityTo: 0,
                stops: [0, 90, 100]
            }
        },
        yaxis: {
            title: {
                text: 'Units'
            }
        },
        xaxis: {
            type: 'datetime',
            labels: {
                datetimeFormatter: {
                    year: 'yyyy',
                    month: "MMM 'yy",
                    day: 'dd MMM yyyy',
                    hour: 'HH:mm'
                }
            },
            title: {
                text: 'Test Date'
            },
            categories: [
                '2020/01/18',
                '2020/02/14',
                '2020/08/16',
                '2021/01/18',
                '2021/02/24',
                '2021/02/26',
                '2021/02/28',
                '2021/03/24',
                '2021/04/20'
            ]
        }
    };

    // var chart3 = new ApexCharts(document.querySelector("#toptrend3"), options3);
    // chart3.render();
</script>
<script>
    // $(document).ready( function () {
    //   getTopCurrentTrends();
    // });

    function getTopCurrentTrends() {
        $.ajax({
            type: 'GET',
            url: '/api/get_top_trends_web/',
            beforeSend: function (xhr) {
                xhr.setRequestHeader('Authorization', 'Token ' + token);
            },
            success: function (result) {
                var parsed_data = result;
                for (let index = 0; index < parsed_data['trends_count']; index++) {
                    var count = index + 1;
                    eval('options' + count)['series'][0]['name'] = parsed_data['trend' + count];
                    eval('options' + count)['series'][0]['data'] = parsed_data['values' + count];
                    eval('options' + count)['title']['text'] =
                        parsed_data['trend' + count] + ' trends';
                    eval('options' + count)['yaxis']['title']['text'] =
                        parsed_data['trend' + count] + ' in (' + parsed_data['units' + count] + ')';
                    eval('options' + count)['xaxis']['categories'] = parsed_data['dates' + count];
                    var chart = new ApexCharts(
                        document.querySelector('#toptrend' + count),
                        eval('options' + count)
                    );
                    chart.render();
                }
                hidePleaseWait();
            },
            error: function (result) {
                console.log('error');
                hidePleaseWait();
                //alert(result);
            }
        });
    }
</script>
{% endblock %}
